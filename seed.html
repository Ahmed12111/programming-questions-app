<!DOCTYPE html>
<html lang="en">
<head>
    <title>Firebase Seeder</title>
</head>
<body>
    <h1>Data Seeding in Progress...</h1>
    <p>Check the console for progress.</p>
    <button id="start-seeding">Start Seeding</button>

    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-firestore-compat.js"></script>

    <script>
        // !! Ù‡Ø§Ù… Ø¬Ø¯Ù‹Ø§: Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø§Ù„ÙƒØ§Ø¦Ù† Ø¨Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ Ù…Ù† Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBVTr26WP9CllJ--o_DovsXik-vJTXIwZI",
            authDomain: "programming-questions-app.firebaseapp.com",
            projectId: "programming-questions-app",
            storageBucket: "programming-questions-app.firebasestorage.app",
            messagingSenderId: "811853082874",
            appId: "1:811853082874:web:439bd481db70e92f79d943",
            measurementId: "G-2MS42KRMLN"
        };
        
        // ØªÙ‡ÙŠØ¦Ø© Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const questionsCollection = db.collection('questions');

        // Ø¯Ø§Ù„Ø© Ù„Ø±ÙØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        async function seedDatabase() {
            try {
                // 1. Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù…Ù„Ù JSON
                const response = await fetch('questions.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const questions = await response.json();
                console.log(`Found ${questions.length} questions in JSON file.`);

                // 2. Ø±ÙØ¹ ÙƒÙ„ Ø³Ø¤Ø§Ù„ Ø¥Ù„Ù‰ Firestore
                for (const question of questions) {
                    await questionsCollection.add(question);
                    console.log(`Successfully added: "${question.question.substring(0, 30)}..."`);
                }

                console.log('ðŸŽ‰ --- Seeding Complete! --- ðŸŽ‰');
                alert('Data seeding complete! All questions have been uploaded to Firebase.');

            } catch (error) {
                // --- Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§ ---
                // Ø³ÙŠØ¹Ø±Ø¶ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø·Ø£ Ø§Ù„ÙƒØ§Ù…Ù„ ÙÙŠ Ø§Ù„ÙƒÙˆÙ†Ø³ÙˆÙ„ ÙˆØ±Ø³Ø§Ù„Ø© ÙˆØ§Ø¶Ø­Ø© ÙÙŠ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡
                console.error('Firebase Seeding Error:', error);
                alert(`An error occurred. Check the console for details. Error message: ${error.message}`);
            }
        }

        document.getElementById('start-seeding').addEventListener('click', () => {
            if (confirm('Are you sure you want to seed the database? This will add all questions from the JSON file.')) {
                seedDatabase();
            }
        });
    </script>
</body>
</html>
